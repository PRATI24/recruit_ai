<!DOCTYPE html>
<html>
<head>
  <title>Recruit AI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #eef2ff, #f5f3ff);
      margin: 0;
      padding: 40px;
      text-align: center;
    }

    h1 {
      font-size: 40px;
      margin-bottom: 10px;
    }

    h2 {
      margin-top: 50px;
    }

    .container {
      display: flex;
      gap: 30px;
      justify-content: center;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    textarea {
      width: 400px;
      height: 200px;
      padding: 15px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    button {
      margin-top: 30px;
      padding: 15px 40px;
      font-size: 16px;
      border: none;
      border-radius: 25px;
      background: linear-gradient(135deg, #4f46e5, #7c3aed);
      color: white;
      cursor: pointer;
    }

    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    #results {
      margin-top: 50px;
      display: none;
      background: white;
      padding: 30px;
      border-radius: 15px;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    .score-circle {
      width: 140px;
      height: 140px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      font-weight: bold;
      color: white;
      margin: auto;
    }

    .badge {
      padding: 8px 18px;
      border-radius: 20px;
      color: white;
      display: inline-block;
      margin-top: 10px;
    }

    .email-box {
      margin-top: 20px;
      background: #f9fafb;
      padding: 15px;
      border-radius: 10px;
      text-align: left;
      white-space: pre-wrap;
      font-size: 14px;
    }
  </style>
</head>

<body>

  <h1>âœ¨ Recruit AI</h1>
  <p>AI-Powered Candidate Evaluation Engine</p>

  <div class="container">
    <div>
      <h3>Job Description</h3>
      <textarea id="jd" placeholder="Paste job description here..."></textarea>
    </div>

    <div>
      <h3>Candidate Resume</h3>
      <textarea id="resume" placeholder="Paste candidate resume here..."></textarea>
    </div>
  </div>

  <button id="analyzeBtn" onclick="analyze()">Analyze Candidate</button>

  <div id="results">
    <h2>Evaluation Results</h2>

    <div style="display:flex; gap:50px; align-items:center; justify-content:center; flex-wrap:wrap;">
      <div>
        <h3>Fit Score</h3>
        <div id="scoreCircle" class="score-circle"></div>
      </div>

      <div style="max-width:500px; text-align:left;">
        <h3>Summary</h3>
        <p id="summaryText"></p>

        <h3>Recommendation</h3>
        <div id="recommendationBadge" class="badge"></div>
      </div>
    </div>

    <div id="emailSection" style="margin-top:30px; display:none;">
      <h3>Email Draft</h3>
      <div id="emailText" class="email-box"></div>
    </div>
  </div>

<script>
function analyze() {

  const jd = document.getElementById("jd").value;
  const resume = document.getElementById("resume").value;
  const button = document.getElementById("analyzeBtn");

  if (!jd || !resume) {
    alert("Please fill both fields.");
    return;
  }

  button.innerText = "Analyzing...";
  button.disabled = true;

  fetch("https://pratishthasharma.app.n8n.cloud/webhook/resume-evaluation", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ jd: jd, resume: resume })
  })
  .then(response => response.json())
  .then(data => {

    document.getElementById("results").style.display = "block";

    const score = data.score || 0;
    const scoreCircle = document.getElementById("scoreCircle");
    scoreCircle.innerText = score + "/100";

    if (score >= 80) {
      scoreCircle.style.background = "#16a34a";
    } else if (score >= 50) {
      scoreCircle.style.background = "#f59e0b";
    } else {
      scoreCircle.style.background = "#dc2626";
    }

    document.getElementById("summaryText").innerText =
      data.summary || "No summary available.";

    const badge = document.getElementById("recommendationBadge");
    badge.innerText = data.recommended_action || "N/A";

    if (data.recommended_action === "Interview") {
      badge.style.background = "#16a34a";
    } else if (data.recommended_action === "Hold") {
      badge.style.background = "#f59e0b";
    } else {
      badge.style.background = "#dc2626";
    }

    if (data.email_draft) {
      document.getElementById("emailSection").style.display = "block";
      document.getElementById("emailText").innerText = data.email_draft;
    } else {
      document.getElementById("emailSection").style.display = "none";
    }

  })
  .catch(error => {
    alert("Error connecting to backend.");
  })
  .finally(() => {
    button.innerText = "Analyze Candidate";
    button.disabled = false;
  });
}
</script>

</body>
</html>
